---
layout: post
title: 二叉平衡树实现
subtitle: 二叉平衡树实现
date: 2020-02-04
author: nightmare-man
tags: 数据结构与算法
---
# 		avl树代码实现

# 0x00 insert代码

​	注意使用该函数时，要将返回值赋值给传入的p，因为根节点会在旋转时改变。

```c
node avl_insert(node p,int x){
	node ret=p;
	if(!p){
		ret=createnode(x);
	}else{
		if(x>p->data){
			//通过递归，插入节点，在插入节点后，要检查平衡因子 
			//因为是插在右边，所以只检查hr-hl>1 
			//如果大于1，就 判断是rr  rl中的哪一种 
			//方法是 如果插入的x比p->right->data大，那就说明在右边的右边是rr，否则rl； 
			p->right=avl_insert(p->right,x); 
			if(getheight(p->right)-getheight(p->left)>1){
				if(x>p->right->data){
					node temp=p->right;
					p->right=temp->left;
					temp->left=p; 
					ret=temp;
				}else if(x<p->right->data){
					node temp=p->right;
					node temp1=temp->left;
					p->right=temp1->left;
					temp->left=temp1->right;
					temp1->left=p;
					temp1->right=temp;	
					ret=temp1;
				}
			} 
			
		}else if(x<p->data){
			p->left=avl_insert(p->left,x);
			if(getheight(p->right)-getheight(p->left)>1){
				if(x<p->left->data){
					node temp=p->left;
					p->left=temp->right;
					temp->right=p; 
					ret=temp;
				}else if(x>p->left->data){
					node temp=p->left;
					node temp1=temp->right;
					temp->right=temp1->left;
					p->left=temp1->right;
					temp1->left=temp1;
					temp1->right=p;
					ret=temp1;
				}
			} 
		}else{
			printf("节点已有！");
			ret=p;
		}
	}
	return ret;
}
```



